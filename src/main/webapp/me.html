<html>
  <head>
    <title>Record Collection</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="jquery.cookie.js"></script>
    <link rel="stylesheet" type="text/css" href="rcstyle.css">
  </head>
  <body>
    <h1 id=greeting>Welcome</h1>
    <div id=information></div>
    <div id=collections></div>
    <script>
     function get(url) {
       var request = new XMLHttpRequest();
       request.open('GET', url, false);  // `false` makes the request synchronous
       request.send();
       return JSON.parse(request.responseText);
     }
     
     $(document).ready(function() {
       
       //Replace the parts with the right parts
       user = get("/endpoint/me?token=" + $.cookie("access_token"));
       
       if (user["redirect"]) {
         window.location.replace(user["redirect"]);
       }
       
       $("#greeting").html("Welcome " + user["userName"]);

       collection_info = get("/endpoint/overview/" + user["userName"] + "?token=" + $.cookie("access_token"));
       $("#information").html("You have " + collection_info["collection_size"] + " records in " + collection_info["number_of_folders"] + " folders.");

       collections = get("/endpoint/collections?token=" + $.cookie("access_token"));
       html_text = "<TABLE WIDTH=3><TR><TH>Name</TH><TH>Folders</TH><TH>Proportions</TH></TR>"
       for(var i = 0; i < collections.length ; i++) {
         html_text += "<TR><TD>Blah1</TD><TD>Blah2</TD><TD>Blah3</TD></TR>";
       }
       html_text += "</TABLE>";
       $("#collections").html(html_text);
     });
    </script>
  </body>
</html>
